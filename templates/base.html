<!DOCTYPE html>
<html lang="ko">
<head>
    <!-- (옵션) 카카오 인앱 브라우저 감지: 원하면 Venatus도 숨기기 -->
    <script>
      (function () {
        var isKakaoInApp = /KAKAOTALK/i.test(navigator.userAgent);

        // 카카오 인앱에서 광고를 아예 숨기고 싶다면 유지
        if (isKakaoInApp) {
          var style = document.createElement('style');
          style.textContent = `
            /* Venatus 광고 컨테이너 숨김 */
            .vnt-ad, [data-vnt-placement] { display: none !important; }
          `;
          document.head.appendChild(style);
          return;
        }

        // ✅ Venatus Head Script (모든 페이지 공통)
        // 가이드: <head>에 Venatus Head Script 추가 :contentReference[oaicite:5]{index=5}
        var s = document.createElement('script');
        s.async = true;
        s.src = 'https://hb.vntsm.com/v4/live/vms/sites/fcgg.kr/index.js';
        document.head.appendChild(s);
      })();
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <meta name="naver-site-verification" content="c1b0a71b768a10669f82da810f13bc34f3953457" />
    <meta name="keywords" content="피파, 피파온라인, 피파온라인4, FC온라인, 피파 전적, 피파 전적 검색, FC온라인 전적, FC온라인 전적검색, 플레이스타일, 승률 개선, 수수료 계산기, 빠칭코, 선수 티어, 에프씨지지, fcgg, fc.gg">
    <meta name="robots" content="max-snippet:50, max-image-preview:large" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-67J7MBCLN9"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-67J7MBCLN9');
    </script>

    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KX3HQ7FD');</script>
    <!-- End Google Tag Manager -->

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/variables.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/components.css') }}">

    {% block extra_css %}{% endblock %}

    <title>{% block title %}FC.GG{% endblock %}</title>
    <link rel="icon" href="{{ url_for('static', filename='fcgglogo.ico') }}">

    <!-- Open Graph Meta Tags -->
    <meta property="og:image" content="{{ url_for('static', filename='fcgglogo.jpg', _external=True) }}">
    <meta property="og:type" content="website">
    {% block extra_meta %}{% endblock %}

    <!-- (권장) Venatus 광고 컨테이너 공통 CSS: 중앙정렬 + 최소높이 -->
    <style>
      .vnt-ad {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
      }
      /* 예시: takeover는 큰 사이즈가 올 수 있어 최소 높이 확보 권장 */
      .vnt-ad--desktop-takeover { min-height: 250px; }
      .vnt-ad--mobile-banner { min-height: 100px; }
    </style>
</head>

<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript>
      <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KX3HQ7FD"
      height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <!-- End Google Tag Manager (noscript) -->

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">로딩중...</div>
    </div>
    {% block loading %}{% endblock %}

    {% include 'components/header.html' %}

    <main class="main-container">
        <!-- ✅ 페이지별로 여기에 원하는 광고 div를 넣으면 됨 -->
        {% block content %}{% endblock %}
    </main>

    {% include 'components/footer.html' %}

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- ✅ Venatus placements 자동 디스플레이 (SSR/Flask용) -->
    <script>
      // 가이드의 핵심: __VM.push 안에서 placement를 display()로 붙임 :contentReference[oaicite:6]{index=6}
      window.__VM = window.__VM || [];
      window.__VM.push(function(admanager, scope) {
        document.querySelectorAll('[data-vnt-placement]').forEach(function(el) {
          var placementName = el.getAttribute('data-vnt-placement');
          var instanceName = el.getAttribute('data-vnt-instance') || undefined;

          // injected/sticky 계열은 body에 붙이는 방식 사용 예시가 있음 :contentReference[oaicite:7]{index=7}
          var injected = ['horizontal_sticky','mobile_horizontal_sticky','video_slider','interstitial'].includes(placementName);

          try {
            scope.Config.verticalSticky().display();
          } catch (e) {
            console.warn('[VENATUS] vertical_sticky failed', e);
          }


            // 일반 배치: display(el)
            // injected 배치: display({ body:true })
            scope.Config.get(placementName, instanceName).display(injected ? { body: true } : el);
          } catch (e) {
            console.warn('[VENATUS] placement display failed:', placementName, e);
          }

          /* ======================
          Desktop Takeover
          ====================== */
          if (window.innerWidth >= 1024) {
            try {
              scope.Config.get('desktop_takeover').display();
            } catch (e) {
              console.warn('[VENATUS] desktop_takeover failed', e);
            }
          }
        
          /* ======================
          Mobile Takeover
          ====================== */
          if (window.innerWidth < 1024) {
            try {
              scope.Config.get('mobile_takeover').display();
            } catch (e) {
              console.warn('[VENATUS] mobile_takeover failed', e);
            }
          }
        });
      });
    </script>

    <!-- Common Scripts -->
    <script>
        function showLoading() {
            const overlay = document.getElementById('loading-overlay');
            if (overlay) overlay.style.display = 'flex';
        }

        function hideLoading() {
            const overlay = document.getElementById('loading-overlay');
            if (overlay) overlay.style.display = 'none';
        }

        window.addEventListener('pageshow', function(event) {
            if (event.persisted || (window.performance && window.performance.navigation.type === 2)) {
                hideLoading();
            }
        });

        document.getElementById('menuToggle')?.addEventListener('click', () => {
            document.getElementById('headerNav').classList.toggle('active');
        });

        document.addEventListener('click', (e) => {
            const nav = document.getElementById('headerNav');
            const toggle = document.getElementById('menuToggle');
            if (nav && toggle && !nav.contains(e.target) && !toggle.contains(e.target)) {
                nav.classList.remove('active');
            }
        });

        document.getElementById('happyButton')?.addEventListener('click', () => {
            document.getElementById('happyPopup').style.display = 'block';
            document.getElementById('popupOverlay').style.display = 'block';
        });

        document.getElementById('closePopup')?.addEventListener('click', () => {
            document.getElementById('happyPopup').style.display = 'none';
            document.getElementById('popupOverlay').style.display = 'none';
        });

        document.getElementById('popupOverlay')?.addEventListener('click', () => {
            document.getElementById('happyPopup').style.display = 'none';
            document.getElementById('popupOverlay').style.display = 'none';
        });
    </script>

    {% block extra_js %}{% endblock %}
</body>
</html>
