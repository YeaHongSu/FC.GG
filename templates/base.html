<!DOCTYPE html>
<html lang="ko">
<head>
    <!-- ✅ (옵션) 카카오 인앱 브라우저 감지: 광고 완전 비활성화(원하면 유지) -->
    <script>
      (function () {
        var isKakaoInApp = /KAKAOTALK/i.test(navigator.userAgent);

        if (isKakaoInApp) {
          var style = document.createElement('style');
          style.textContent = `
            /* Venatus 광고 컨테이너 숨김 */
            .vnt-ad, [id^="vnt-"], [data-vnt-placement] { display: none !important; }
          `;
          document.head.appendChild(style);
          return;
        }

        // ✅ Venatus Head Script (모든 페이지 공통)
        var s = document.createElement('script');
        s.async = true;
        s.src = 'https://hb.vntsm.com/v4/live/vms/sites/fcgg.kr/index.js';
        document.head.appendChild(s);

        var initScript = document.createElement('script');
            initScript.text = `
                self.__VM = self.__VM || [];
                self.__VM.push(function (admanager, scope) {

                    /* 중앙 배너 */
                    scope.Config.buildPlacement(function (configBuilder) {
                        configBuilder.add("billboard");
                        configBuilder.addDefaultOrUnique("mobile_banner")
                                     .setBreakPoint("mobile");
                    }, "home-center").display("vm-center-banner");

                    /* 하단 배너 */
                    scope.Config.buildPlacement(function (configBuilder) {
                        configBuilder.add("leaderboard");
                        configBuilder.addDefaultOrUnique("mobile_banner")
                                     .setBreakPoint("mobile");
                    }, "home-bottom").display("vm-bottom-banner");

                    /* 좌/우 Sticky 광고 */
                    scope.Config.get("vertical_sticky").display();

                });
            `;
            document.head.appendChild(initScript);
      })();
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <meta name="naver-site-verification" content="c1b0a71b768a10669f82da810f13bc34f3953457" />
    <meta name="keywords" content="피파, 피파온라인, 피파온라인4, FC온라인, 피파 전적, 피파 전적 검색, FC온라인 전적, FC온라인 전적검색, 플레이스타일, 승률 개선, 수수료 계산기, 빠칭코, 선수 티어, 에프씨지지, fcgg, fc.gg">
    <meta name="robots" content="max-snippet:50, max-image-preview:large" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-67J7MBCLN9"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-67J7MBCLN9');
    </script>

    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KX3HQ7FD');</script>
    <!-- End Google Tag Manager -->

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/variables.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/components.css') }}">

    {% block extra_css %}{% endblock %}

    <title>{% block title %}FC.GG{% endblock %}</title>
    <link rel="icon" href="{{ url_for('static', filename='fcgglogo.ico') }}">

    <!-- Open Graph Meta Tags -->
    <meta property="og:image" content="{{ url_for('static', filename='fcgglogo.jpg', _external=True) }}">
    <meta property="og:type" content="website">
    {% block extra_meta %}{% endblock %}

    <!-- ✅ Venatus 공통 CSS (레이아웃 밀림 방지 + 중앙정렬) -->
    <style>
      .vnt-ad{
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      /* 최소 높이(권장): 페이지가 밀리지 않게 */
      .vnt-minh-90  { min-height: 90px; }
      .vnt-minh-100 { min-height: 100px; }
      .vnt-minh-250 { min-height: 250px; }
      .vnt-minh-600 { min-height: 600px; }

      /* PC/모바일 슬롯 토글 (너 사이트 기준 768px) */
      .ad-slot--mobile { display: none; }
      @media (max-width: 768px) {
        .ad-slot--pc { display: none; }
        .ad-slot--mobile { display: block; }
      }
    </style>
</head>

<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript>
      <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KX3HQ7FD"
      height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <!-- End Google Tag Manager (noscript) -->

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">로딩중...</div>
    </div>
    {% block loading %}{% endblock %}

    {% include 'components/header.html' %}

    <main class="main-container">
        {% block content %}{% endblock %}
    </main>

    {% include 'components/footer.html' %}

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- ✅ Venatus (Non-SPA/MPA) : 공통으로 "주입형" 광고만 여기서 처리
         - vertical_sticky (PC 좌/우)
         - horizontal_sticky / mobile_horizontal_sticky (하단 고정)
         * leaderboard/mobile_banner/mobile_takeover 같은 "콘텐츠 안" 배치는 각 페이지에서 슬롯ID로 display() -->
    <script>
      window.__VM = window.__VM || [];
      window.__VM.push(function (admanager, scope) {
        var isMobile = window.matchMedia('(max-width: 768px)').matches;

        // 1) 좌/우 sticky (PC에서만)
        if (!isMobile) {
          try {
            scope.Config.verticalSticky().display();
          } catch (e) {
            console.warn('[VENATUS] verticalSticky display failed', e);
          }
        }

        // 2) 하단 고정 sticky (PC/모바일 1개만)
        try {
          if (isMobile) {
            scope.Config.get('mobile_horizontal_sticky').display({ body: true });
          } else {
            scope.Config.get('horizontal_sticky').display({ body: true });
          }
        } catch (e) {
          console.warn('[VENATUS] bottom sticky display failed', e);
        }
      });
    </script>

    <!-- Common Scripts -->
    <script>
        function showLoading() {
            const overlay = document.getElementById('loading-overlay');
            if (overlay) overlay.style.display = 'flex';
        }

        function hideLoading() {
            const overlay = document.getElementById('loading-overlay');
            if (overlay) overlay.style.display = 'none';
        }

        window.addEventListener('pageshow', function(event) {
            if (event.persisted || (window.performance && window.performance.navigation.type === 2)) {
                hideLoading();
            }
        });

        document.getElementById('menuToggle')?.addEventListener('click', () => {
            document.getElementById('headerNav').classList.toggle('active');
        });

        document.addEventListener('click', (e) => {
            const nav = document.getElementById('headerNav');
            const toggle = document.getElementById('menuToggle');
            if (nav && toggle && !nav.contains(e.target) && !toggle.contains(e.target)) {
                nav.classList.remove('active');
            }
        });

        document.getElementById('happyButton')?.addEventListener('click', () => {
            document.getElementById('happyPopup').style.display = 'block';
            document.getElementById('popupOverlay').style.display = 'block';
        });

        document.getElementById('closePopup')?.addEventListener('click', () => {
            document.getElementById('happyPopup').style.display = 'none';
            document.getElementById('popupOverlay').style.display = 'none';
        });

        document.getElementById('popupOverlay')?.addEventListener('click', () => {
            document.getElementById('happyPopup').style.display = 'none';
            document.getElementById('popupOverlay').style.display = 'none';
        });
    </script>

    {% block extra_js %}{% endblock %}
</body>
</html>
